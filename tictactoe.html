<head>
  <title>Haitian Tic Tac Toe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
  <h1>Haitian TicTacToe</h1>

  {{> Board }}
  Turn: {{ playerturn }}
</body>

<template name="Board">
  <div class="board {{ playerturn }} {{ deviceType }}">
    {{#each rows}}
      {{> row row=@index values=this }}
    {{/each}}
  </div>
</template>

<template name="row">
  <div class="row">
    {{#each values }}
      {{> cell row=../row col=@index value=this.value}}
    {{/each}}
  </div>
</template>

<template name="cell">
  <div data-row="{{ row }}" data-col="{{ col }}" data-player="{{ value }}"
       class="cell {{#unless value }}empty{{/unless}}">
    {{#if value }}
      {{> pawn row=row col=col val=value }}
    {{/if}}
    <div class="line {{ lineClass 'vertical' row col }}"></div>
    <div class="line {{ lineClass 'horizontal' row col }}"></div>
    <div class="line {{ lineClass 'diagonal' row col }}"></div>
  </div>
</template>

<template name="pawn">
  <div data-row="{{ row }}"
    data-col="{{ col }}"
    class="pawn"
    id="{{row}}_{{col}}">{{ val }}</div>
</template>
